<%- include('../header') %>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>

  <div class="page-wrapper">
    <div class="container-fluid py-4">

      <!-- üîç Search + Title Card -->
      <div class="card shadow-lg mb-4 border-0 rounded-3">
        <div class="card-body d-flex flex-wrap justify-content-between align-items-center">
          <h4 class="mb-0 fw-bold">üì¶ Category Table</h4>
          <form class="form-inline mt-2 mt-md-0" method="get" action="/admin/viewPage">
            <div class="input-group">
              <input type="text" name="search" value="<%= typeof search !== 'undefined' ? search : '' %>"
                class="form-control rounded-start" placeholder="Search by Category Name" style="min-width: 250px;">
              <button class="btn btn-primary rounded-end" type="submit">Search</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Category Cards Layout -->
      <div class="row">
        <% categories.map((val, index)=> { %>
          <div class="col-md-4 col-lg-3 mb-4">
            <div class="card shadow border-0 h-100 overflow-hidden">

              <!-- Full Image (perfectly fit) -->
              <div style="width:100%; height:180px; overflow:hidden;">
                <img src="<%= val.category.image %>" alt="Category" class="card-img-top w-100 h-100" style="object-fit: cover;">
              </div>

              <!-- Content -->
              <div class="card-body text-center">
                <h5 class="fw-bold mb-1">
                  <%= val.category.categoryName %>
                </h5>
                <p class="text-muted">ID: <%= ++index %>
                </p>
                <div class="d-flex justify-content-center gap-2 mt-3">
                  <a href="/category/editCategory/<%= val._id %>" class="btn btn-sm btn-primary px-3">‚úèÔ∏è Edit</a>
                  <a href="/category/deleteCategory/<%= val._id %>" class="btn btn-sm btn-danger px-3">üóë Delete</a>
                </div>
              </div>

            </div>
          </div>
          <% }) %>
      </div>

    </div>
  </div>

  <%- include('../footer') %>